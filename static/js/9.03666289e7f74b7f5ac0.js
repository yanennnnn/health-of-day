webpackJsonp([9],{"3kOq":function(t,e){},"8iRF":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7QTg"),i=(s("BpKH"),{name:"swiper-example-space-between",title:"Space between slides",components:{Swiper:a.Swiper,SwiperSlide:a.SwiperSlide},data:function(){return{swiperOption:{spaceBetween:30,speed:300,autoplay:!0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{544:{slidesPerView:1},767:{slidesPerView:2,centeredSlides:!1},991:{slidesPerView:3,centeredSlides:!0}}},products:[],recommendproduct:[]}},methods:{getProduct:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/yanennn/products/all").then(function(e){t.products=e.data.products})}},computed:{recommendProduct:function(){return this.products.filter(function(t,e,s){return e%4==0})}},created:function(){this.getProduct()}}),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.products.length>0?s("swiper",{staticClass:"swiper",attrs:{options:t.swiperOption}},[t._l(t.recommendProduct,function(e){return s("swiper-slide",{key:e.id},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:" mb-4 mx-2"},[s("div",{staticClass:"card border-0 "},[s("router-link",{staticClass:"products-info-img text-center text-decoration-none rounded",style:{backgroundImage:"url("+e.imageUrl+")"},attrs:{to:"/detail/"+e.id}},[s("div",[t._v("more...")])]),t._v(" "),s("div",{staticClass:"card-body "},[s("router-link",{staticClass:"card-title text-center d-block text-decoration-none h5",attrs:{to:"/detail/"+e.id}},[t._v(t._s(e.title))]),t._v(" "),s("p",{staticClass:"card-text products-info-content text-muted"},[t._v(t._s(e.content))])],1)],1),t._v(" "),s("hr")])])])}),t._v(" "),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):t._e()},staticRenderFns:[]};var r={components:{productSwiper:s("VU/8")(i,n,!1,function(t){s("3kOq")},"data-v-0e7fe01a",null).exports},data:function(){return{cart:{carts:[]},isLoading:!1,coupon_code:""}},methods:{getCart:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/yanennn/cart").then(function(e){t.cart=e.data.data,t.isLoading=!1})},removeCartItem:function(t){var e=this,s="https://vue-course-api.hexschool.io/api/yanennn/cart/"+t;e.isLoading=!0,this.$http.delete(s).then(function(t){t.data.success?(e.$bus.$emit("message:push","商品成功刪除","success"),e.$bus.$emit("cartCreate:push"),e.getCart(),e.isLoading=!1):(e.$bus.$emit("message:push","出現錯誤!","danger"),e.isLoading=!1)})},addCouponCode:function(){var t=this,e={code:t.coupon_code};t.isLoading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/yanennn/coupon",{data:e}).then(function(e){e.data.success?(t.$bus.$emit("message:push","優惠卷套用成功","success"),t.getCart(),t.isLoading=!1):(t.$bus.$emit("message:push","出現錯誤!","danger"),t.isLoading=!1)})},goCheckOrder:function(){this.$router.push("/customerOrder")}},created:function(){var t=this;t.getCart(),t.$bus.$on("cartCreate:push",function(){t.getCart()}),$("html,body").scrollTop(0)}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[a("template",{slot:"default"},[a("img",{attrs:{src:s("GuUm"),width:"70px"}}),t._v(" "),a("img",{attrs:{src:s("CBvG"),width:"100px"}})])],2),t._v(" "),a("div",{staticClass:"container px-md-5 px-0 cart  text-center"},[a("h2",{staticClass:"pt-4"},[t._v("購物車內容")]),t._v(" "),0!==t.cart.carts.length?a("div",{staticClass:"mt-4"},[a("table",{staticClass:"table  "},[t._m(0),t._v(" "),a("tbody",t._l(t.cart.carts,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle",attrs:{scope:"row"}},[a("button",{staticClass:"btn btn-sm btn-outline-danger ",on:{click:function(s){return s.preventDefault(),t.removeCartItem(e.id)}}},[a("font-awesome-icon",{attrs:{icon:["far","trash-alt"]}})],1)]),t._v(" "),a("td",{staticClass:"d-md-block d-none"},[a("img",{attrs:{src:e.product.imageUrl,width:"70",height:"70",alt:""}})]),t._v(" "),a("td",{staticClass:"align-middle dropdown-menu-title"},[t._v(t._s(e.product.title))]),t._v(" "),a("td",{staticClass:"align-middle text-nowrap"},[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),t._v(" "),t.cart.total==t.cart.final_total?a("td",{staticClass:"align-middle"},[t._v(t._s(t._f("currency")(e.final_total)))]):a("td",{staticClass:"align-middle "},[t._v(t._s(t._f("currency")(e.final_total))+" "),e.coupon?a("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()])])}),0),t._v(" "),a("tfoot",[a("tr",[t.cart.total==t.cart.final_total?a("td",{staticClass:"text-right ",attrs:{colspan:"5"}},[t._v("小計: "),a("span",{staticClass:"mr-1"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):a("td",{staticClass:"text-right text-success",attrs:{colspan:"5"}},[t._v("小計: "),a("span",{staticClass:"mr-1"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])])]),t._v(" "),t._m(1),t._v(" "),a("tr",[a("td",{staticClass:"text-right text-danger font-weight-bold",attrs:{colspan:"5"}},[t._v("總計: "),a("span",{staticClass:"h2"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])])])])]),t._v(" "),a("div",{staticClass:"input-group mb-3 input-group-md text-right "},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\n                        套用優惠碼\n                        ")])])]),t._v(" "),a("div",{staticClass:"text-right"},[a("button",{staticClass:"py-2 btn btn-primary m-md-0 mr-2",on:{click:t.goCheckOrder}},[t._v("確認訂單，前往下一步 "),a("font-awesome-icon",{staticClass:"text-light",attrs:{icon:["fas","arrow-right"]}})],1)])]):a("div",{staticClass:"mt-4 "},[a("p",{staticStyle:{padding:"70px 0 70px 0"}},[t._v("尚未有商品，快來去逛逛吧!")]),t._v(" "),a("p",{staticClass:"text-primary h2 font-weight-bold mt-5"},[t._v("為你推薦!")]),t._v(" "),a("hr"),t._v(" "),a("productSwiper")],1)])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col",width:"10"}}),t._v(" "),s("th",{staticClass:"d-md-block d-none",attrs:{scope:"col"}},[t._v("商品圖片")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("商品名稱")]),t._v(" "),s("th",{attrs:{scope:"col",width:"30"}},[t._v("數量")]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v("金額")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"text-right ",staticStyle:{border:"none"},attrs:{colspan:"5"}},[this._v("運費:"),e("span",{staticClass:"ml-4 mr-1"},[this._v("$0")])])])}]},c=s("VU/8")(r,o,!1,null,null,null);e.default=c.exports}});
//# sourceMappingURL=9.03666289e7f74b7f5ac0.js.map