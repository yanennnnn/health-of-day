{"version":3,"sources":["webpack:///src/views/font/CustomerOrder.vue","webpack:///./src/views/font/CustomerOrder.vue?3c49","webpack:///./src/views/font/CustomerOrder.vue"],"names":["CustomerOrder","data","cart","carts","form","user","name","tel","email","address","message","isLoading","leave","methods","getCart","vm","this","$http","get","then","response","createOrder","_this","order","$validator","validate","result","post","success","$router","push","orderId","$bus","$emit","created","beforeRouteLeave","to","from","next","jquery_default","modal","on","font_CustomerOrder","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","active","update:active","$event","slot","src","__webpack_require__","width","_v","_l","item","key","id","scope","product","imageUrl","height","alt","_s","title","qty","_f","final_total","_m","staticStyle","border","colspan","submit","preventDefault","for","directives","rawName","value","expression","class","is-invalid","errors","has","type","placeholder","domProps","input","target","composing","$set","_e","onkeyup","first","rows","staticRenderFns","tabindex","role","aria-labelledby","aria-hidden","data-backdrop","data-dismiss","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.43a7204b7ddc7b8bb8cf.js","sourcesContent":["<template>\r\n    <div class=\"container customerOrder\">\r\n        <loading :active.sync=\"isLoading\">\r\n            <template slot=\"default\">\r\n                <img src=\"../../assets/images/juice-icon.png\" width=\"70px\">\r\n                <img src=\"../../assets/images/juice-dribbble.gif\" width=\"100px\">\r\n            </template>\r\n        </loading>\r\n        <h2 class=\"pt-5 text-center\">訂購資料</h2>\r\n        <div class=\"mt-4  border-primary row justify-content-center\" >\r\n            <div class=\"col-lg-5 col-md-7 col-10  customerOrder-cart \">\r\n                <p class=\"h5 my-3 ml-2 \">訂單明細</p>\r\n                <div class=\"\">\r\n                    <table class=\"table\">\r\n                        <tbody>\r\n                            <tr  v-for=\"item in cart.carts\" :key=\"item.id\">\r\n                                <th scope=\"row\" class=\"align-middle text-center d-sm-block d-none\"><img :src=\"item.product.imageUrl\" width=\"60\" height=\"65\" alt=\"\"></th>\r\n                                <td class=\"align-middle\">\r\n                                    <span>{{item.product.title}}</span>\r\n                                    <br>\r\n                                    <span class=\"text-muted\">x {{item.qty}}</span>\r\n                                </td>\r\n                                <td class=\"align-middle\" width=\"20\" >{{item.final_total | currency}}</td>\r\n                                <!-- <td>@mdo</td> -->\r\n                            </tr>\r\n                        </tbody>\r\n                        <tfoot>\r\n                            <tr>\r\n                                <td colspan=\"3\" class=\"text-right p-0 pr-2\" style=\"border:none\">運費:<span class=\"ml-4 mr-1\">$0</span></td>\r\n                                <!-- <td class=\" text-danger text-right\" style=\"border:none\">$80</td> -->\r\n                            </tr>\r\n                            <tr><td colspan=\"3\" class=\"text-right  text-danger font-weight-bold\" style=\"border:none\">總計: <span class=\"h2\">{{ cart.final_total | currency }}</span></td>\r\n                                <!-- <td class=\" text-danger text-right \" ></td> -->\r\n                            </tr>\r\n                        </tfoot>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-sm-9 col-11 mt-5\">\r\n                <p class=\"h3 text-center\">收件資料</p>\r\n                <div class=\"mt-3\">\r\n                    <form  @submit.prevent=\"createOrder\">\r\n                        <div class=\"form-row\">\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"userName\">收件人姓名*</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"userName\" name=\"name\" placeholder=\"請輸入姓名\" v-model=\"form.user.name\" :class=\"{'is-invalid': errors.has('name')}\" v-validate=\"'required'\">\r\n                                <small class=\"text-danger\" v-if=\"errors.has('name')\">姓名不得為空</small>\r\n                            </div>\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"userTel\">手機號碼*</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"userTel\" name=\"tel\" placeholder=\"請輸入手機號碼\" v-model=\"form.user.tel\" :class=\"{'is-invalid': errors.has('tel')}\" v-validate=\"'required'\"  onkeyup=\"value=value.replace(/[^0-9]/g,'')\">\r\n                                <small class=\"text-danger\" v-if=\"errors.has('tel')\">手機號碼不得為空</small>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"userEmail\">信箱*</label>\r\n                            <input type=\"email\" class=\"form-control\" id=\"userEmail\" name=\"email\"  placeholder=\"請輸入信箱\" v-model=\"form.user.email\" :class=\"{'is-invalid': errors.has('email')}\" v-validate=\"'required|email'\">\r\n                            <small class=\"text-danger\" v-if=\"errors.has('email')\">{{errors.first('email')}}</small>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"userAddress\">地址*</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"userAddress\" name=\"address\" placeholder=\"請輸入地址\" v-model=\"form.user.address\" :class=\"{'is-invalid': errors.has('address')}\" v-validate=\"'required'\">\r\n                            <small class=\"text-danger\" v-if=\"errors.has('address')\">地址不得為空</small>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <label for=\"userTextarea\">留言備註</label>\r\n                            <textarea class=\"form-control\" id=\"userTextarea\" rows=\"3\" v-model=\"form.message\"></textarea>\r\n                        </div>\r\n                        <!-- <div class=\"form-row\">\r\n                            <div class=\"form-group col-md-6\">\r\n                            <label for=\"inputCity\">City</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"inputCity\">\r\n                            </div>\r\n                            <div class=\"form-group col-md-4\">\r\n                            <label for=\"inputState\">State</label>\r\n                            <select id=\"inputState\" class=\"form-control\">\r\n                                <option selected>Choose...</option>\r\n                                <option>...</option>\r\n                            </select>\r\n                            </div>\r\n                            <div class=\"form-group col-md-2\">\r\n                            <label for=\"inputZip\">Zip</label>\r\n                            <input type=\"text\" class=\"form-control\" id=\"inputZip\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <div class=\"form-check\">\r\n                            <input class=\"form-check-input\" type=\"checkbox\" id=\"gridCheck\">\r\n                            <label class=\"form-check-label\" for=\"gridCheck\">\r\n                                Check me out\r\n                            </label>\r\n                            </div>\r\n                        </div> -->\r\n                         <div class=\"d-flex justify-content-center mt-5\">\r\n                             <!-- <button class=\"py-sm-2 py-0 btn btn-outline-primary mx-2 d-block\" style=\"width:220px\">返回上一步 </button> -->\r\n                            <button type=\"submit\" class=\"py-2 btn btn-primary mx-2 d-block\" style=\"width:250px\">確認送出 </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                \r\n            </div>   \r\n        </div>\r\n\r\n        <!-- modal -->\r\n        <div class=\"modal fade\" id=\"CreateOrder\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"CreateOrderCenterTitle\" aria-hidden=\"true\"  data-backdrop=\"static\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-body leave-modal\">\r\n                        <p>您的訂單資料尚未送出，確定要離開此頁?</p>\r\n                        <div class=\"text-right\">\r\n                        <button type=\"button\" class=\"mr-2 confirm\" data-dismiss=\"modal\">確定</button>\r\n                        <button type=\"button\" class=\"cancel\" data-dismiss=\"modal\">取消</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nexport default {\r\n    data(){\r\n        return{\r\n            cart:{\r\n                carts:[],\r\n            },\r\n            form:{\r\n                user:{\r\n                    name:'',\r\n                    tel:'',\r\n                    email:'',\r\n                    address:'',\r\n                },\r\n                message:''\r\n            },\r\n            isLoading:false,\r\n            leave:false\r\n        }\r\n    },\r\n    methods:{\r\n        getCart(){\r\n            const vm=this;\r\n            const url = `${process.env.APIPATH}/api/${process.env.CUSTOMPATH}/cart`;\r\n            vm.isLoading=true;\r\n            this.$http.get(url).then((response) => {\r\n                vm.cart = response.data.data;\r\n                vm.isLoading=false;\r\n            \r\n            });\r\n        },\r\n        createOrder(){\r\n            const vm=this;\r\n            const url=`${process.env.APIPATH}/api/${process.env.CUSTOMPATH}/order`;\r\n            const order=vm.form;\r\n            vm.isLoading=true;\r\n            this.$validator.validate().then((result) => { //防止沒有驗證也能送出表單\r\n                if (result) {\r\n                    this.$http.post(url, { data: order }).then((response) => {\r\n                        vm.leave = true;\r\n                        vm.getCart();\r\n                        if (response.data.success) {//建立成功跳轉到customer_checkout\r\n                            vm.$router.push(`/customerCheckout/${response.data.orderId}`);\r\n                            vm.$bus.$emit(\"cartCreate:push\"); \r\n                        }\r\n                        vm.isLoading = false;\r\n                    });\r\n                } else {\r\n                    vm.isLoading = false;\r\n                    return\r\n                   \r\n                }\r\n            });\r\n        }\r\n    },\r\n    created(){\r\n        this.getCart();\r\n    },\r\n    beforeRouteLeave (to, from, next) {\r\n         const vm = this;\r\n        if (vm.leave) {\r\n            next();\r\n        } else {\r\n            $('#CreateOrder').modal('show');\r\n            $('.confirm').on('click', () => {\r\n                next();\r\n            });\r\n            $('.cancel').on('click', () => {\r\n                next(false);\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n    .customerOrder{\r\n        margin-top: 71px;\r\n        &-cart{\r\n            border-top: thick double;\r\n            box-shadow: 0 0 10px #ccc;\r\n        }\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/font/CustomerOrder.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container customerOrder\"},[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}},[_c('template',{slot:\"default\"},[_c('img',{attrs:{\"src\":require(\"../../assets/images/juice-icon.png\"),\"width\":\"70px\"}}),_vm._v(\" \"),_c('img',{attrs:{\"src\":require(\"../../assets/images/juice-dribbble.gif\"),\"width\":\"100px\"}})])],2),_vm._v(\" \"),_c('h2',{staticClass:\"pt-5 text-center\"},[_vm._v(\"訂購資料\")]),_vm._v(\" \"),_c('div',{staticClass:\"mt-4  border-primary row justify-content-center\"},[_c('div',{staticClass:\"col-lg-5 col-md-7 col-10  customerOrder-cart \"},[_c('p',{staticClass:\"h5 my-3 ml-2 \"},[_vm._v(\"訂單明細\")]),_vm._v(\" \"),_c('div',{},[_c('table',{staticClass:\"table\"},[_c('tbody',_vm._l((_vm.cart.carts),function(item){return _c('tr',{key:item.id},[_c('th',{staticClass:\"align-middle text-center d-sm-block d-none\",attrs:{\"scope\":\"row\"}},[_c('img',{attrs:{\"src\":item.product.imageUrl,\"width\":\"60\",\"height\":\"65\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('td',{staticClass:\"align-middle\"},[_c('span',[_vm._v(_vm._s(item.product.title))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"text-muted\"},[_vm._v(\"x \"+_vm._s(item.qty))])]),_vm._v(\" \"),_c('td',{staticClass:\"align-middle\",attrs:{\"width\":\"20\"}},[_vm._v(_vm._s(_vm._f(\"currency\")(item.final_total)))])])}),0),_vm._v(\" \"),_c('tfoot',[_vm._m(0),_vm._v(\" \"),_c('tr',[_c('td',{staticClass:\"text-right  text-danger font-weight-bold\",staticStyle:{\"border\":\"none\"},attrs:{\"colspan\":\"3\"}},[_vm._v(\"總計: \"),_c('span',{staticClass:\"h2\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.final_total)))])])])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-9 col-11 mt-5\"},[_c('p',{staticClass:\"h3 text-center\"},[_vm._v(\"收件資料\")]),_vm._v(\" \"),_c('div',{staticClass:\"mt-3\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.createOrder($event)}}},[_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group col-md-6\"},[_c('label',{attrs:{\"for\":\"userName\"}},[_vm._v(\"收件人姓名*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"},{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.errors.has('name')},attrs:{\"type\":\"text\",\"id\":\"userName\",\"name\":\"name\",\"placeholder\":\"請輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),_vm._v(\" \"),(_vm.errors.has('name'))?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"姓名不得為空\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"form-group col-md-6\"},[_c('label',{attrs:{\"for\":\"userTel\"}},[_vm._v(\"手機號碼*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.tel),expression:\"form.user.tel\"},{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.errors.has('tel')},attrs:{\"type\":\"text\",\"id\":\"userTel\",\"name\":\"tel\",\"placeholder\":\"請輸入手機號碼\",\"onkeyup\":\"value=value.replace(/[^0-9]/g,'')\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", $event.target.value)}}}),_vm._v(\" \"),(_vm.errors.has('tel'))?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"手機號碼不得為空\")]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"userEmail\"}},[_vm._v(\"信箱*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"},{name:\"validate\",rawName:\"v-validate\",value:('required|email'),expression:\"'required|email'\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.errors.has('email')},attrs:{\"type\":\"email\",\"id\":\"userEmail\",\"name\":\"email\",\"placeholder\":\"請輸入信箱\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),_vm._v(\" \"),(_vm.errors.has('email'))?_c('small',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.errors.first('email')))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"userAddress\"}},[_vm._v(\"地址*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"},{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],staticClass:\"form-control\",class:{'is-invalid': _vm.errors.has('address')},attrs:{\"type\":\"text\",\"id\":\"userAddress\",\"name\":\"address\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),_vm._v(\" \"),(_vm.errors.has('address'))?_c('small',{staticClass:\"text-danger\"},[_vm._v(\"地址不得為空\")]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"userTextarea\"}},[_vm._v(\"留言備註\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"id\":\"userTextarea\",\"rows\":\"3\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_vm._v(\" \"),_vm._m(1)])])])]),_vm._v(\" \"),_vm._m(2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',{staticClass:\"text-right p-0 pr-2\",staticStyle:{\"border\":\"none\"},attrs:{\"colspan\":\"3\"}},[_vm._v(\"運費:\"),_c('span',{staticClass:\"ml-4 mr-1\"},[_vm._v(\"$0\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify-content-center mt-5\"},[_c('button',{staticClass:\"py-2 btn btn-primary mx-2 d-block\",staticStyle:{\"width\":\"250px\"},attrs:{\"type\":\"submit\"}},[_vm._v(\"確認送出 \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"CreateOrder\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"CreateOrderCenterTitle\",\"aria-hidden\":\"true\",\"data-backdrop\":\"static\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-body leave-modal\"},[_c('p',[_vm._v(\"您的訂單資料尚未送出，確定要離開此頁?\")]),_vm._v(\" \"),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"mr-2 confirm\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"確定\")]),_vm._v(\" \"),_c('button',{staticClass:\"cancel\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")])])])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c823772\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/font/CustomerOrder.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c823772\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CustomerOrder.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomerOrder.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomerOrder.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c823772\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CustomerOrder.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6c823772\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/font/CustomerOrder.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}